---
title: "Evolution of solar energy production and use."
author: "Laia Porcar, Luis Marcos LÃ³pez, Philippe Robert"
date: "11/08/2022"
output:
  html_document:
    keep_md: yes
    toc: yes
    df_print: kable
  pdf_document:
    toc: yes
editor_options:
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(warn=-1)
```


```{r, results="hide", message = FALSE}
# Installs
#install.packages("caret")
#install.packages("car")
#install.packages("ggplot2")
#install.packages("devtools")


# Libraries
library(knitr)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(ggcorrplot)
library(devtools) 
library(caret)
library(car)
library(kableExtra)
library(ggpubr)

```



```{r results = 'asis'}
# Read the dataset
file_path <- getwd()
paste(file_path)

df_capac <- read.csv(paste0(file_path, "/installed-solar-PV-capacity.csv"),header=TRUE)
df_capit <- read.csv(paste0(file_path, "/per-capita-solar.csv"),header=TRUE)
df_prim <- read.csv(paste0(file_path, "/primary-energy-consumption-from-solar.csv"),header=TRUE)
df_shar <- read.csv(paste0(file_path, "/share-electricity-solar.csv"),header=TRUE)
df_consump <- read.csv(paste0(file_path, "/solar-energy-consumption.csv"),header=TRUE)
df_cumcapac <- read.csv(paste0(file_path, "/solar-pv-cumulative-capacity.csv"),header=TRUE)
df_price <- read.csv(paste0(file_path, "/solar-pv-prices.csv"),header=TRUE)
df_totconsumpcapita <- read.csv(paste0(file_path, "/per-capita-energy.csv"), header=TRUE)


df_capac[1:150,] %>%
  kable(format = "html", col.names = colnames(df_capac)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_capit[1:150,] %>%
  kable(format = "html", col.names = colnames(df_capit)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_prim[1:150,] %>%
  kable(format = "html", col.names = colnames(df_prim)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_shar[1:150,] %>%
  kable(format = "html", col.names = colnames(df_shar)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_consump[1:150,] %>%
  kable(format = "html", col.names = colnames(df_consump)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_cumcapac[1:150,] %>%
  kable(format = "html", col.names = colnames(df_cumcapac)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_price[1:150,] %>%
  kable(format = "html", col.names = colnames(df_pris)) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%", height = "300px")

df_totconsumpcapita[1:150,] %>% 
  kable(format = "html", col.names = colnames(df_totconsumpcapita)) %>% 
  kable_styling() %>% 
  kableExtra::scroll_box(width = "100%", height = "300ppx")

```


```{r results = 'asis'}

df_capacity <- df_capac %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_capita <- df_capit %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_primary <- df_prim %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_share <- df_shar %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_consumption <- df_consump %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_cumcap <- df_cumcapac %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_totconsump <- df_totconsumpcapita %>% filter(Entity == 'World') %>% select(-c(Entity, Code))
df_price <- select(df_price,-c(Entity, Code))

df <- merge(df_capacity,df_capita, by="Year", all = TRUE)
df <- merge(df,df_primary,by="Year", all = TRUE)
df <- merge(df,df_share,by="Year", all = TRUE)
df <- merge(df,df_consumption,by="Year", all = TRUE)
df <- merge(df,df_cumcap,by="Year", all = TRUE)
df <- merge(df,df_price,by="Year", all = TRUE)
df <- merge(df,df_totconsump,by="Year", all = TRUE)
df = subset(df, select = -c(Entity.x,Code.x, Entity.y, Code.y) )
df[is.na(df)] <- 0


```




# Exploratory data analysis


# Apply stuff from the lectures









